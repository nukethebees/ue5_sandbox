#pragma once

/*
Warning: This is an autogenerated file.
*/

// clang-format off
#include <array>
#include <functional>
#include <utility>

#include "CoreMinimal.h"

#include "player_skills.generated.h"

UENUM(BlueprintType)
enum class EPlayerSkillName : uint8 {
    // Attribute
    Strength UMETA(DisplayName = "Strength"),
    Endurance UMETA(DisplayName = "Endurance"),
    Agility UMETA(DisplayName = "Agility"),
    Cyber UMETA(DisplayName = "Cyber"),
    Psi UMETA(DisplayName = "Psi"),

    // Tech
    hacking UMETA(DisplayName = "Hacking"),

    // Weapon
    small_guns UMETA(DisplayName = "Small Guns"),
};
namespace ml {
// Attribute
// ----------------------------------------------------------------------
inline constexpr int32 num_attribute_values{5};
// Index functions for looping
inline constexpr int32 attribute_start_index{0};
// The last index (inclusive)
inline constexpr int32 attribute_last_index{4};
// The index after the last index 
inline constexpr int32 attribute_end_index{5};

inline constexpr auto is_attribute(EPlayerSkillName value) -> bool {
    auto const x{std::to_underlying(value)}; 
    constexpr auto lower{
        std::to_underlying(EPlayerSkillName::Strength)
    };
    constexpr auto upper{
        std::to_underlying(EPlayerSkillName::Psi)
    };
    
    return ((x >= lower) && (x <= upper));
}

inline constexpr std::array<EPlayerSkillName, 5> attribute_values{{
    EPlayerSkillName::Strength,
    EPlayerSkillName::Endurance,
    EPlayerSkillName::Agility,
    EPlayerSkillName::Cyber,
    EPlayerSkillName::Psi
}};


// Tech
// ----------------------------------------------------------------------
inline constexpr int32 num_tech_values{1};
// Index functions for looping
inline constexpr int32 tech_start_index{5};
// The last index (inclusive)
inline constexpr int32 tech_last_index{5};
// The index after the last index 
inline constexpr int32 tech_end_index{6};

inline constexpr auto is_tech(EPlayerSkillName value) -> bool {
    auto const x{std::to_underlying(value)}; 
    constexpr auto lower{
        std::to_underlying(EPlayerSkillName::hacking)
    };
    constexpr auto upper{
        std::to_underlying(EPlayerSkillName::hacking)
    };
    
    return ((x >= lower) && (x <= upper));
}

inline constexpr std::array<EPlayerSkillName, 1> tech_values{{
    EPlayerSkillName::hacking
}};


// Weapon
// ----------------------------------------------------------------------
inline constexpr int32 num_weapon_values{1};
// Index functions for looping
inline constexpr int32 weapon_start_index{6};
// The last index (inclusive)
inline constexpr int32 weapon_last_index{6};
// The index after the last index 
inline constexpr int32 weapon_end_index{7};

inline constexpr auto is_weapon(EPlayerSkillName value) -> bool {
    auto const x{std::to_underlying(value)}; 
    constexpr auto lower{
        std::to_underlying(EPlayerSkillName::small_guns)
    };
    constexpr auto upper{
        std::to_underlying(EPlayerSkillName::small_guns)
    };
    
    return ((x >= lower) && (x <= upper));
}

inline constexpr std::array<EPlayerSkillName, 1> weapon_values{{
    EPlayerSkillName::small_guns
}};

// String functions
inline auto get_display_name(EPlayerSkillName value) -> FName {
    switch (value) {
        case EPlayerSkillName::Strength: {
            static FName const name{TEXT("Strength")};
            return name;
        }
        case EPlayerSkillName::Endurance: {
            static FName const name{TEXT("Endurance")};
            return name;
        }
        case EPlayerSkillName::Agility: {
            static FName const name{TEXT("Agility")};
            return name;
        }
        case EPlayerSkillName::Cyber: {
            static FName const name{TEXT("Cyber")};
            return name;
        }
        case EPlayerSkillName::Psi: {
            static FName const name{TEXT("Psi")};
            return name;
        }
        case EPlayerSkillName::hacking: {
            static FName const name{TEXT("Hacking")};
            return name;
        }
        case EPlayerSkillName::small_guns: {
            static FName const name{TEXT("Small Guns")};
            return name;
        }
        default: {
            break;
        }
    }

    static auto const unhandled_name{FName{TEXT("UNHANDLED_CASE")}};
    return unhandled_name;
}
inline auto get_display_string(EPlayerSkillName value) -> FString const& {
    switch (value) {
        case EPlayerSkillName::Strength: {
            static FString const name{get_display_name(value).ToString()};
            return name;
        }
        case EPlayerSkillName::Endurance: {
            static FString const name{get_display_name(value).ToString()};
            return name;
        }
        case EPlayerSkillName::Agility: {
            static FString const name{get_display_name(value).ToString()};
            return name;
        }
        case EPlayerSkillName::Cyber: {
            static FString const name{get_display_name(value).ToString()};
            return name;
        }
        case EPlayerSkillName::Psi: {
            static FString const name{get_display_name(value).ToString()};
            return name;
        }
        case EPlayerSkillName::hacking: {
            static FString const name{get_display_name(value).ToString()};
            return name;
        }
        case EPlayerSkillName::small_guns: {
            static FString const name{get_display_name(value).ToString()};
            return name;
        }
        default: {
            break;
        }
    }

    static FString const unhandled_name{TEXT("UNHANDLED_CASE")};
    return unhandled_name;
}
inline auto get_display_string_view(EPlayerSkillName value) -> TStringView<TCHAR> {
    return get_display_string(value);
}
} // namespace ml

USTRUCT(BlueprintType)
struct FPlayerSkills {
    GENERATED_BODY()
  public:
    using Getter = std::function<int32()>;
    using Setter = std::function<void(int32)>;

    struct SkillView {
        EPlayerSkillName enum_key;
        FString const& name;
        Getter getter;
        Setter setter;

        SkillView() = delete;
        SkillView(EPlayerSkillName enum_key, 
                  FString const& name, 
                  Getter getter, 
                  Setter setter)
            : enum_key(enum_key)
            , name(name)
            , getter(getter)
            , setter(setter) 
        {};
    };

    // Attribute
    static constexpr int32 max_strength{10};
    static constexpr int32 max_endurance{10};
    static constexpr int32 max_agility{10};
    static constexpr int32 max_cyber{10};
    static constexpr int32 max_psi{10};

    // Tech
    static constexpr int32 max_hacking{10};

    // Weapon
    static constexpr int32 max_small_guns{10};

    // Attribute
    constexpr auto get_strength() const -> int32 { 
        return strength_; 
    }
    constexpr void set_strength(int32 value) { 
        strength_ = std::min(strength_, max_strength);
    }
    auto get_strength_view() {
        constexpr auto enum_value{EPlayerSkillName::Strength};
        return SkillView{
            enum_value,
            ml::get_display_string(enum_value),
            [&]() -> int32 { 
                return get_strength(); 
            },
            [&](int32 value) -> void { 
                set_strength(value); 
            }
        };
    }
    constexpr auto get_endurance() const -> int32 { 
        return endurance_; 
    }
    constexpr void set_endurance(int32 value) { 
        endurance_ = std::min(endurance_, max_endurance);
    }
    auto get_endurance_view() {
        constexpr auto enum_value{EPlayerSkillName::Endurance};
        return SkillView{
            enum_value,
            ml::get_display_string(enum_value),
            [&]() -> int32 { 
                return get_endurance(); 
            },
            [&](int32 value) -> void { 
                set_endurance(value); 
            }
        };
    }
    constexpr auto get_agility() const -> int32 { 
        return agility_; 
    }
    constexpr void set_agility(int32 value) { 
        agility_ = std::min(agility_, max_agility);
    }
    auto get_agility_view() {
        constexpr auto enum_value{EPlayerSkillName::Agility};
        return SkillView{
            enum_value,
            ml::get_display_string(enum_value),
            [&]() -> int32 { 
                return get_agility(); 
            },
            [&](int32 value) -> void { 
                set_agility(value); 
            }
        };
    }
    constexpr auto get_cyber() const -> int32 { 
        return cyber_; 
    }
    constexpr void set_cyber(int32 value) { 
        cyber_ = std::min(cyber_, max_cyber);
    }
    auto get_cyber_view() {
        constexpr auto enum_value{EPlayerSkillName::Cyber};
        return SkillView{
            enum_value,
            ml::get_display_string(enum_value),
            [&]() -> int32 { 
                return get_cyber(); 
            },
            [&](int32 value) -> void { 
                set_cyber(value); 
            }
        };
    }
    constexpr auto get_psi() const -> int32 { 
        return psi_; 
    }
    constexpr void set_psi(int32 value) { 
        psi_ = std::min(psi_, max_psi);
    }
    auto get_psi_view() {
        constexpr auto enum_value{EPlayerSkillName::Psi};
        return SkillView{
            enum_value,
            ml::get_display_string(enum_value),
            [&]() -> int32 { 
                return get_psi(); 
            },
            [&](int32 value) -> void { 
                set_psi(value); 
            }
        };
    }

    // Tech
    constexpr auto get_hacking() const -> int32 { 
        return hacking_; 
    }
    constexpr void set_hacking(int32 value) { 
        hacking_ = std::min(hacking_, max_hacking);
    }
    auto get_hacking_view() {
        constexpr auto enum_value{EPlayerSkillName::hacking};
        return SkillView{
            enum_value,
            ml::get_display_string(enum_value),
            [&]() -> int32 { 
                return get_hacking(); 
            },
            [&](int32 value) -> void { 
                set_hacking(value); 
            }
        };
    }

    // Weapon
    constexpr auto get_small_guns() const -> int32 { 
        return small_guns_; 
    }
    constexpr void set_small_guns(int32 value) { 
        small_guns_ = std::min(small_guns_, max_small_guns);
    }
    auto get_small_guns_view() {
        constexpr auto enum_value{EPlayerSkillName::small_guns};
        return SkillView{
            enum_value,
            ml::get_display_string(enum_value),
            [&]() -> int32 { 
                return get_small_guns(); 
            },
            [&](int32 value) -> void { 
                set_small_guns(value); 
            }
        };
    }


    template <EPlayerSkillName skill_type>
    constexpr auto get(this auto const& self) -> int32 {
        if constexpr (skill_type == EPlayerSkillName::Strength) {
            return self.get_strength();
        } else if constexpr (skill_type == EPlayerSkillName::Endurance) {
            return self.get_endurance();
        } else if constexpr (skill_type == EPlayerSkillName::Agility) {
            return self.get_agility();
        } else if constexpr (skill_type == EPlayerSkillName::Cyber) {
            return self.get_cyber();
        } else if constexpr (skill_type == EPlayerSkillName::Psi) {
            return self.get_psi();
        } else if constexpr (skill_type == EPlayerSkillName::hacking) {
            return self.get_hacking();
        } else if constexpr (skill_type == EPlayerSkillName::small_guns) {
            return self.get_small_guns();
        } else {
            // TODO: Add error handling
            return -1;
        }
    }
    template <EPlayerSkillName skill_type>
    constexpr void set(this auto& self, int32 value) {
        if constexpr (skill_type == EPlayerSkillName::Strength) {
            self.set_strength(value);
        } else if constexpr (skill_type == EPlayerSkillName::Endurance) {
            self.set_endurance(value);
        } else if constexpr (skill_type == EPlayerSkillName::Agility) {
            self.set_agility(value);
        } else if constexpr (skill_type == EPlayerSkillName::Cyber) {
            self.set_cyber(value);
        } else if constexpr (skill_type == EPlayerSkillName::Psi) {
            self.set_psi(value);
        } else if constexpr (skill_type == EPlayerSkillName::hacking) {
            self.set_hacking(value);
        } else if constexpr (skill_type == EPlayerSkillName::small_guns) {
            self.set_small_guns(value);
        }  else {
            // TODO: Add error handling
        }
    }
    constexpr auto get(this auto const& self, 
                       EPlayerSkillName skill_type) -> int32 {
        switch (skill_type) {
            case EPlayerSkillName::Strength: {
                return self.get_strength();
            }
            case EPlayerSkillName::Endurance: {
                return self.get_endurance();
            }
            case EPlayerSkillName::Agility: {
                return self.get_agility();
            }
            case EPlayerSkillName::Cyber: {
                return self.get_cyber();
            }
            case EPlayerSkillName::Psi: {
                return self.get_psi();
            }
            case EPlayerSkillName::hacking: {
                return self.get_hacking();
            }
            case EPlayerSkillName::small_guns: {
                return self.get_small_guns();
            }
            default: { break; }
        }
        
        // TODO: Add error handling
        return -1;
    }

    constexpr void set(this auto& self, 
             EPlayerSkillName skill_type, 
             int32 value) {
        switch (skill_type) {
            case EPlayerSkillName::Strength: {
                self.set_strength(value);
                return;
            }
            case EPlayerSkillName::Endurance: {
                self.set_endurance(value);
                return;
            }
            case EPlayerSkillName::Agility: {
                self.set_agility(value);
                return;
            }
            case EPlayerSkillName::Cyber: {
                self.set_cyber(value);
                return;
            }
            case EPlayerSkillName::Psi: {
                self.set_psi(value);
                return;
            }
            case EPlayerSkillName::hacking: {
                self.set_hacking(value);
                return;
            }
            case EPlayerSkillName::small_guns: {
                self.set_small_guns(value);
                return;
            }
            default: { break; }
        }
        // TODO: Add error handling
    }
  private:
    // Attribute
    UPROPERTY(EditAnywhere, Category="Player")
    int32 strength_{1};
    UPROPERTY(EditAnywhere, Category="Player")
    int32 endurance_{1};
    UPROPERTY(EditAnywhere, Category="Player")
    int32 agility_{1};
    UPROPERTY(EditAnywhere, Category="Player")
    int32 cyber_{1};
    UPROPERTY(EditAnywhere, Category="Player")
    int32 psi_{1};

    // Tech
    UPROPERTY(EditAnywhere, Category="Player")
    int32 hacking_{1};

    // Weapon
    UPROPERTY(EditAnywhere, Category="Player")
    int32 small_guns_{1};
};
// clang-format on
